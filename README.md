# 🤖 GdBB - 广东宝宝

> 一个会说话、会做表情、会联网的 ESP32-S3 小机器人

广东宝宝（GdBB）是一个基于 ESP32-S3 的多媒体智能机器人项目，继承自 electronbot 的设计理念。它不仅能听会说，还能通过可爱的表情与你互动，是一个真正有"灵魂"的小伙伴。

## ✨ 有趣的功能

### 😊 表情系统
- **454×454 AMOLED 圆屏**：高分辨率显示，让每个表情都生动传神
- **流畅动画**：支持分帧播放，表情切换自然流畅
- **智能压缩**：表情资源经过优化，节省存储空间

### 🎤 语音交互
- **双向语音**：既能听你说话，也能播放声音回应
- **回声消除（AEC）**：即使边播放边录音，也能清晰识别你的声音
- **降噪处理**：自动过滤环境噪音，专注你的声音
- **实时编解码**：支持 Opus 等高效音频格式，保证流畅对话

### 🌐 安全联网
- **TLS 加密通信**：所有网络交互都经过硬件加速加密，保护隐私安全
- **数字签名加速**：利用 ESP32-S3 的硬件 DS 外设，快速安全的身份认证
- **MQTT 支持**：可以连接到云端服务，实现远程控制和数据同步

### 🎵 多媒体播放
- **流式音频播放**：支持网络流媒体和本地文件播放
- **低延迟**：优化的缓冲策略，保证音画同步
- **多格式支持**：灵活的解码器架构，易于扩展

### 🔮 未来扩展
- **摄像头支持**：预留接口，未来可以"看"世界
- **手势识别**：通过 NPU 加速，识别你的手势动作
- **舵机控制**：让机器人动起来，不只是屏幕上的表情

## 🏗️ 技术架构

广东宝宝采用分层模块化设计，每个功能都是独立的组件，可以灵活组合：

```
┌─────────────────────────────────────┐
│          UI Layer (表情/界面)        │
├─────────────────────────────────────┤
│    App/State (业务状态机 + 任务编排)  │
├─────────────────────────────────────┤
│  Service Layer (音频/显示/存储/网络)  │
├─────────────────────────────────────┤
│      HAL/Driver (硬件抽象层)         │
└─────────────────────────────────────┘
```

### 核心组件

- **audio_core**：音频采集、播放、AEC/AGC/NS 处理
- **display**：AMOLED 驱动、表情帧管理、UI 渲染
- **net_crypto**：WiFi、TLS、MQTT 等网络和安全功能
- **app_state**：全局状态机、事件总线、任务调度
- **storage**：文件系统、资源管理

## 🚀 快速开始

### 硬件要求

- ESP32-S3 开发板（推荐 N8R16 配置，带 PSRAM）
- ES8311 音频编解码器
- AMOLED 1.75 寸圆屏（454×454）
- 可选：外接 QSPI Flash（用于存储表情和模型）

### 环境准备

1. 安装 ESP-IDF（推荐 v5.4+）
2. 配置开发环境

```bash
# 设置目标芯片
idf.py set-target esp32s3

# 配置项目（可选）
idf.py menuconfig
```

### 编译和烧录

```bash
# 编译项目
idf.py build

# 烧录到设备
idf.py -p PORT flash

# 查看串口输出
idf.py -p PORT monitor
```

## 📦 项目结构

```
gdBB/
├── main/              # 主程序入口
├── components/        # 功能组件
│   ├── audio_core/   # 音频核心
│   ├── display/      # 显示驱动
│   ├── net_crypto/   # 网络加密
│   └── app_state/    # 状态管理
├── partitions.csv     # 分区表配置
└── sdkconfig.defaults # 默认配置
```

## 🎯 开发路线图

- [x] 框架搭建与基础组件
- [x] TLS 安全通信
- [ ] 音频内核完善（AEC/NS）
- [ ] 编解码优化
- [ ] 表情系统实现
- [ ] 状态机与业务框架
- [ ] 摄像头集成
- [ ] 手势识别

## 💡 设计亮点

### 资源优化
- **智能内存管理**：关键控制结构放 IRAM，大缓冲放 PSRAM
- **分时调度**：避免 SPI 屏和 I2S 同时高占用导致的带宽冲突
- **压缩存储**：表情帧采用压缩格式，节省 Flash 空间

### 性能优化
- **硬件加速**：充分利用 ESP32-S3 的 DS 外设、I2S、DMA 等硬件特性
- **任务优先级**：I2S/AEC 高优先级，保证实时性
- **事件驱动**：轻量级事件总线，避免资源争用

### 可扩展性
- **模块化设计**：每个功能都是独立组件，易于替换和扩展
- **配置灵活**：通过 Kconfig 可以裁剪不需要的功能
- **调试友好**：支持独立调试模式，可以单独测试各个模块

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！如果你有有趣的想法或发现了问题，随时告诉我们。

## 📄 许可证

本项目继承自 electronbot 项目，遵循相应的开源许可证。

---

**让广东宝宝成为你的智能伙伴，一起探索 IoT 的无限可能！** 🎉
